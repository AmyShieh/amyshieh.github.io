"use strict";(self.webpackChunkmy_docusaurus_blog=self.webpackChunkmy_docusaurus_blog||[]).push([[4934],{62361:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>P,contentTitle:()=>M,default:()=>Y,frontMatter:()=>B,metadata:()=>S,toc:()=>j});var a=n(58168),r=n(96540),s=n(15680),o=n(39437),c=n(43907),l=n(17024),i=n(65540),d=n(65804),u=n(94742),p=n(92763),m=n(56318),f=n(53945);const w=800,g=500,h=new o.tcD(50),y=new o.iNn(100,100,100),b=new o.Gu$(50),v=new o.bdM(100,100),E=new o.fTw(300,10,16711918,14544639),x=new p.B;new o.tBo;function T(e){const{type:t}=e,n=(0,r.useRef)(null),a=new o.Z58,[s,p]=(0,r.useState)(b),[T,A]=(0,r.useState)((new o.Tap).load("https://gd-hbimg.huaban.com/55a9bf701ec3c9bf7a780e01bf79ef5721cc29f9c9bff-kcQlZy_fw1200webp")),[k,C]=(0,r.useState)(!1),B=(0,r.useMemo)((()=>new o.tXL({map:T,transparent:k})),[T,k]),M=(0,r.useMemo)((()=>new o.eaF(s,B)),[s,B,t]),[S,P]=(0,r.useState)(new o.IzY(200)),j=new o.$p8(16777215,.8),F=new o.ZyN(16777215,.8);F.position.set(400,200,300);const[G,Y]=(0,r.useState)(new o.ubm(30,w/g,.1,1e4)),I=(0,r.useMemo)((()=>new o.YJl),[t]),N=(0,r.useMemo)((()=>new o.JeP({antialias:!0,preserveDrawingBuffer:!0})),[t]),_=(0,r.useMemo)((()=>new l.N(G,N.domElement)),[N,t]),[z,W]=(0,r.useState)(!1),[J,O]=(0,r.useState)(0),q=new i.s(N),D=new d.A(a,G),[X,L]=(0,r.useState)(new o.I9Y);q.addPass(D);const Z=new o.I9Y(w,g),V=new u.G(Z,a,G);V.visibleEdgeColor.set(255);const $=(0,r.useCallback)((()=>{const e=N.domElement,t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="threejs.png",t.click()}),[]);return(0,r.useEffect)((()=>{N?.domElement?.addEventListener("click",(e=>{const{offsetX:t,offsetY:n}=e,a=t/w*2-1,r=-n/g*2+1;console.log({px:t,py:n,x:a,y:r}),L(new o.I9Y(a,r))}))}),[N,G,a.children]),(0,r.useEffect)((()=>{N.setSize(w,g),N.setClearColor(16711918,.05)}),[N]),(0,r.useEffect)((()=>{switch(G.position.set(200,200,200),G.lookAt(0,0,0),t){case"basic":P(new o.IzY(1e3));for(let e=0;e<3;e++){const t=new o.V9B({color:268435200}),n=new o.eaF(y,t);n.position.x=200*e,I.add(n)}return G.position.set(875,370,700),G.lookAt(184,50,90),_.target.set(184,50,90),void _.update();case"uv":return void p(h);case"arrayPattern":{p(v);const e=(new o.Tap).load("https://gd-hbimg.huaban.com/0937ce9c977cd9b6714d948e9e933a6b7e1bd3562a1a6-zSpiyj_fw658webp");return e.wrapS=o.GJx,e.wrapT=o.GJx,e.repeat.set(10,10),A(e),void G.position.set(100,100,100)}case"transparentTextureWithGrid":{const e=(new o.Tap).load("https://gd-hbimg.huaban.com/3af0ba78ca7c7aab9642efaa47d45b70dfebe91d222d-ycdmz3_fw1200webp");return C(!0),A(e),p(v),G.position.set(30,707,569),G.lookAt(-10,25,30),_.target.set(-10,25,30),void _.update()}case"textureOffset":{const e=(new o.Tap).load("https://gd-hbimg.huaban.com/c472d5cd84f9b26202e80b1609a9b0bd24acda301eb6-ZkWnbg_fw658webp");return C(!0),e.wrapS=o.GJx,A(e),void p(v)}case"gltf":return P(new o.IzY(2)),x.load("/resource/fist.gltf",(e=>{e.scene.traverse((e=>{e.isMesh&&(e.metalness=1,e.roughness=0)})),I.add(e.scene)}),(e=>{const{lengthComputable:t,loaded:n,total:a}=e;W(t),O(t?n/a:n)})),G.position.set(4,1,4),void G.lookAt(-1,0,-1);case"traverse":{const e=new o.YJl;e.name="\u9ad8\u5c42\u697c";for(let n=0;n<5;n++){const t=new o.iNn(40,200,40),a=new o.V9B({color:268435200}),r=new o.eaF(t,a);r.position.x=60*n,r.name=`${n+1}\u53f7\u697c`,e.add(r)}e.position.y=100;const t=new o.YJl;t.name="\u6d0b\u623f";for(let n=0;n<5;n++){const e=new o.iNn(40,60,40),a=new o.V9B({color:65535}),r=new o.eaF(e,a);r.position.x=60*n,r.name=`${n+1}\u53f7\u697c`,t.add(r)}return t.position.z+=100,t.position.y=30,I.add(e,t),I.traverse((e=>{"2\u53f7\u697c"===e.name&&e.material.color.set(16231612)})),G.position.set(30,707,568),G.lookAt(91,28,35),_.target.set(91,28,35),void _.update()}default:return}}),[t]),(0,r.useEffect)((()=>{a.add(S,j,F);const e=M.clone();switch(t){case"basic":case"gltf":return void a.add(I);case"arrayPattern":case"textureOffset":e.rotateX(-Math.PI/2);break;case"transparentTextureWithGrid":e.rotateX(-Math.PI/2),e.position.y=3,E.position.y=-3,a.add(E);break;case"traverse":return V.selectedObjects=[I],q.addPass(V),void a.add(I)}a.add(e)}),[M,S,j,I]),(0,r.useEffect)((()=>{if(n.current){const e=n.current?.getElementsByTagName("canvas").length;e||n.current.appendChild(N.domElement)}}),[n.current]),(0,r.useEffect)((()=>{const e=()=>{switch(t){case"basic":case"transparentTextureWithGrid":default:break;case"traverse":return q.render(),void window.requestAnimationFrame(e);case"textureOffset":T.offset.x+=.001}N.render(a,G),window.requestAnimationFrame(e)};e()}),[t,a,G]),r.createElement(r.Fragment,null,r.createElement("div",{key:t,id:t,ref:n}),["traverse"].includes(t)&&r.createElement("div",{className:"flex"},"\u904d\u5386 & \u901a\u9053\u56fe"),["transparentTextureWithGrid"].includes(t)&&r.createElement("div",{className:"flex"},r.createElement("div",null,"\u900f\u660e\u8d34\u56fe\u5f00\u542f"),r.createElement(m.A,{checked:k,onChange:e=>C(e)})),["textureOffset"].includes(t)&&r.createElement("div",null,r.createElement("div",null,r.createElement(f.Ay,{onClick:$},"\u4fdd\u5b58\u5f53\u524dcanvas\u4e3a\u56fe\u7247\u529f\u80fd~ \u70b9\u6211\u8bd5\u8bd5")),"\u5173\u4e8e\u8d34\u56fe\u4e0egeometry\u7684\u8d34\u56fe\u53d8\u5f62\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u53c2\u8003",r.createElement("a",{target:"_blank",href:"https://github.com/puxiao/threejs-tutorial/blob/main/25%20Three.js%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%92%8C%E5%A4%A9%E7%A9%BA%E7%9B%92.md"},"\u8fd9\u4e2a\u6559\u7a0b\u91cc\u7684\u63cf\u8ff0")),["gltf"].includes(t)&&r.createElement("div",null,r.createElement(c.A,{style:{width:"78%"},percent:z?100*J:100,status:"active",format:e=>""+(z?e+"%":"\u5df2\u52a0\u8f7d"+Math.round(J/1024/1024*100)/100+"M")}),r.createElement("div",null,"\u9700\u8981gltf\u9759\u6001\u8d44\u6e90\u505a\u6d4b\u8bd5\u7684\u540c\u5b66\u53ef\u4ee5\u76f4\u63a5",r.createElement("a",{target:"_blank",href:"/resource/fist.gltf"},"\u70b9\u8fd9\u91cc\u4e0b\u8f7d"),"\u8d44\u6e90\u6e90\u4e8e\u7f51\u7edc\uff0c\u4fb5\u5220")))}var A=n(71386);const k=e=>{const{type:t}=e,n=(0,r.useRef)(null),a=new o.JeP;a.setSize(800,500),a.setClearColor(16711918,.05);const s=new o.ubm(45,window.innerWidth/window.innerHeight,1,500);s.position.set(0,0,100),s.lookAt(0,0,0);const c=new o.Z58,i=new o.IzY(200);(0,r.useMemo)((()=>new l.N(s,a.domElement)),[a,t]);return(0,r.useEffect)((()=>{n.current&&(console.log((0,A.A)()),n.current.appendChild(a.domElement))}),[n]),(0,r.useEffect)((()=>{const e=()=>{if("line"===t)c.add((()=>{const e=[new o.Pq0(-10,0,0),new o.Pq0(0,10,0),new o.Pq0(10,0,0)],t=(new o.LoY).setFromPoints(e),n=new o.mrM({color:255});return new o.N1A(t,n)})());c.add(i),a.render(c,s),window.requestAnimationFrame(e)};e()}),[t]),r.createElement(r.Fragment,null,r.createElement("div",{id:t,ref:n}),r.createElement("p",null,"line\u7ed8\u5236"))};var C=n(78478);const B={},M=void 0,S={unversionedId:"graphic/threejs/demo",id:"graphic/threejs/demo",title:"demo",description:"{() => (",source:"@site/docs/graphic/threejs/demo.mdx",sourceDirName:"graphic/threejs",slug:"/graphic/threejs/demo",permalink:"/docs/graphic/threejs/demo",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Threejs",permalink:"/docs/graphic/threejs/"},next:{title:"(WIP)3d - webgl",permalink:"/docs/graphic/webgl"}},P={},j=[],F={toc:j},G="wrapper";function Y(e){let{components:t,...n}=e;return(0,s.yg)(G,(0,a.A)({},F,n,{components:t,mdxType:"MDXLayout"}),(0,s.yg)(C.A,{mdxType:"BrowserOnly"},(()=>(0,s.yg)(r.Fragment,null,(0,s.yg)(k,{type:"line",mdxType:"SceneCanvas"}),(0,s.yg)(T,{type:"basic",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"\u57fa\u7840geometry"),(0,s.yg)(T,{type:"line",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"draw line"),(0,s.yg)(T,{type:"texture",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"\u7403\u5f62\u8d34\u56fe"),(0,s.yg)(T,{type:"uv",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"\u5706\u5f62\u8d34\u56fe-uv\u5750\u6807\uff0c\u53ef\u4ee5\u9009\u62e9\u90e8\u5206\u5c55\u793a\uff0c4\u4e2a\u5750\u6807\uff0c\u8bbe\u5b9a\u9876\u70b9\u3002\uff08\u77e9\u5f62\uff09"),(0,s.yg)(T,{type:"arrayPattern",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"planeGeometry\u8d34\u56fe\u9635\u5217"),(0,s.yg)(T,{type:"transparentTextureWithGrid",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"\u900f\u660e\u8d34\u56feWith GridHelper"),(0,s.yg)(T,{type:"textureOffset",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"\u8d34\u56fe\u7684\u504f\u79fb-\u4fee\u6539UV\u9876\u70b9\u5750\u6807"),(0,s.yg)(T,{type:"gltf",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"gltf\u6a21\u578b\u52a0\u8f7d"),(0,s.yg)(T,{type:"traverse",mdxType:"ThreeCanvas"}),(0,s.yg)("p",null,"traverse")))))}Y.isMDXComponent=!0}}]);